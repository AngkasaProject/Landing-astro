---
// src/layouts/BaseLayout.astro
import '../styles/global.css';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import 'aos/dist/aos.css';
import AOS from 'aos';

interface Props {
  title: string;
}

// --- LOGIKA GLOBAL ---
// GANTI DENGAN NOMOR DAN PESAN WHATSAPP ANDA YANG SEBENARNYA
const whatsappNumber = '6285171140818';
const defaultMessage =
  'Halo AetherSub, saya tertarik dengan jersey Anda. Bisakah saya bertanya lebih lanjut?';
const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(defaultMessage)}`;

const { title = 'AetherSub' } = Astro.props;
const currentYear = new Date().getFullYear();
---

<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title || 'Jersey Custom terbaik'}</title>
    <meta
      name="description"
      content="AetherSub menyediakan layanan jersey sublimasi custom e-sport & futsal. Desain gratis, bahan premium, tanpa minimal order. Konsultasi gratis sekarang!"
    />
    <meta
      name="robots"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />

    <link rel="canonical" href={String(Astro.url)} />

    <link rel="icon" type="image/x-icon" href="/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="theme-color" content="#7ccf00" />

    <!-- Open Graph -->
    <meta property="og:title" content={title || 'AetherSub â€“ Jersey Custom Premium'} />
    <meta
      property="og:description"
      content="AetherSub menyediakan jersey sublimasi Bebas Custom. Desain gratis, kualitas premium, dan tanpa minimal order."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={String(Astro.url)} />
    <meta property="og:image" content="https://aethersub.store/asset/images/logo-web-dark.png" />
    <meta property="og:site_name" content="AetherSub" />
    <meta property="og:locale" content="id_ID" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta
      name="twitter:description"
      content="Desain gratis & kualitas premium. Buat jersey custommu di AetherSub."
    />
    <meta name="twitter:image" content="https://aethersub.store/asset/images/logo-web-dark.png" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1575792108863605"
      crossorigin="anonymous"></script>

    <!-- JSON-LD: Organization -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "AetherSub",
        "url": "https://aethersub.store",
        "logo": "https://aethersub.store/asset/images/logo-web-dark.png",
        "sameAs": ["https://instagram.com/aethersub", "https://tiktok.com/@aethersub"],
        "contactPoint": [
          {
            "@type": "ContactPoint",
            "telephone": "+6285171140818",
            "contactType": "customer service",
            "areaServed": "ID"
          }
        ]
      }
    </script>
    <style>
      .delay-150 {
        animation-delay: 0.15s;
      }
      .delay-300 {
        animation-delay: 0.3s;
      }
    </style>
  </head>
  <div
    id="preloader"
    class="fixed inset-0 z-[9999] flex flex-col items-center justify-center overflow-hidden bg-gray-200"
  >
    <div class="dot-spinner">
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
    </div>
  </div>

  <body class="font-base bg-gray-100">
    <Header />

    <slot />

    <Footer />

    <a
      id="wa-button"
      href={whatsappUrl}
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Hubungi kami melalui WhatsApp"
      class="pointer-events-none fixed right-6 bottom-6 z-50 flex h-12 w-12 translate-y-5 transform items-center justify-center rounded-full bg-lime-600 opacity-0 shadow-xl transition duration-300 ease-in-out hover:bg-lime-700 md:h-14 md:w-14"
    >
      <i class="fa-brands fa-whatsapp text-2xl text-white"></i>
    </a>

    <script type="module" src="/scripts/app.js" is:inline></script>
    <script type="module" src="/scripts/header-logic.js" is:inline></script>
    <script>
      import('aos').then((AOS) => {
        AOS.init({
          duration: 1200, // lebih lambat
          easing: 'ease-out-cubic',
          once: true,
        });
      });
    </script>
    <script is:inline>
      window.addEventListener('scroll', () => {
        const hero = document.getElementById('hero-section');
        const waBtn = document.getElementById('wa-button');

        if (!hero || !waBtn) return;

        const heroHeight = hero.offsetHeight;

        if (window.scrollY > heroHeight - 150) {
          waBtn.classList.add('show');
        } else {
          waBtn.classList.remove('show');
        }
      });
    </script>
    <script>
      window.addEventListener('load', () => {
        const preloader = document.getElementById('preloader');
        if (!preloader) return;

        preloader.classList.add('opacity-0', 'pointer-events-none', 'transition', 'duration-1000');

        setTimeout(() => preloader.remove(), 1000);
      });
    </script>
  </body>


</html>
